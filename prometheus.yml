global:
  scrape_interval: 10s

scrape_configs:

  # ===============================
  # NODE EXPORTERS (VM Metrics)
  # ===============================
  - job_name: "node_exporter"
    metrics_path: /metrics
    static_configs:
      - targets:
        - "172.236.187.68:9100"  # AIML-PROD
        - "172.236.164.19:9100"  # STAGE
        - "172.236.189.82:9100"  # WEBSITE PROD

  # ===============================
  # BLACKBOX — URL Uptime Monitoring
  # ===============================
  - job_name: "blackbox_http"
    metrics_path: /probe
    params:
      module: [http_2xx]
    static_configs:
      - targets:
        # PROD URLs
        - https://engageos.ai/
        - https://dashboard.engageos.ai/
        - https://chatapp.engageos.ai/
        - http://172.236.187.68:8081/
        - https://0faa992fe0ecdfb6b9eeeafdfe6f788cdf8549de-3000.dstack-pha-prod7.phala.network

        # STAGE URLs
        - https://stagedbchatapp.engageos.ai/
        - https://stagedb.engageos.ai/
        - https://6700717036c0fdcaa5649069c3654ab6983175ec-3000.dstack-pha-prod7.phala.network
        - http://172.236.164.19:8081/

    relabel_configs:
      - source_labels: [__address__]
        target_label: __param_target
      - source_labels: [__param_target]
        target_label: instance
      - target_label: __address__
        replacement: blackbox_exporter:9115

  # ===============================
  # CADVISOR — Container CPU, RAM, IO, Network
  # ===============================
  - job_name: "cadvisor"
    static_configs:
      - targets:
        - "172.236.187.68:8080"   # AIML-PROD
        - "172.236.164.19:8080"   # STAGE
        - "172.236.189.82:8080"   # WEBSITE PROD

  # ===============================
  # DOCKER EXPORTER — Container Status, Restart Count, Exited Containers
  # ===============================
  - job_name: "docker_exporter"
    static_configs:
      - targets:
        - "172.236.187.68:9323"   # AIML-PROD
        - "172.236.164.19:9323"   # STAGE
        - "172.236.189.82:9323"   # WEBSITE PROD
